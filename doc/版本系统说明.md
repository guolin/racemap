# 版本系统说明

## 概述

本项目集成了自动版本信息显示系统，会在每次构建时自动生成版本信息并显示在首页底部。

## 功能特性

- 自动获取Git提交哈希
- 显示构建时间
- 显示当前分支信息
- 支持点击查看详细信息
- 与Netlify部署集成

## 文件结构

```
├── scripts/build-info.js          # 构建信息生成脚本
├── utils/version.ts               # 版本信息工具函数
├── components/VersionInfo.tsx     # 版本信息显示组件
└── public/build-info.json         # 构建信息JSON文件（自动生成）
```

## 使用方法

### 本地开发

1. 启动开发服务器：
   ```bash
   npm run dev
   ```

2. 版本信息会自动显示在首页底部

### 生产构建

1. 运行构建命令：
   ```bash
   npm run build
   ```

2. 构建过程会自动：
   - 获取当前Git提交信息
   - 生成版本信息文件
   - 创建环境变量文件

### Netlify部署

1. 推送代码到Git仓库
2. Netlify会自动触发构建
3. 构建时会自动生成版本信息
4. 部署后版本信息会显示在首页

## 版本信息格式

### 简化显示
```
v0.1.0 (76adb8b) - 2025/7/12
```

### 详细信息
- **版本**: package.json中的version字段
- **提交**: Git提交的完整哈希
- **环境**: 构建环境（development/production）
- **构建时间**: 构建完成的时间

## 自定义配置

### 修改版本号
编辑 `package.json` 中的 `version` 字段：
```json
{
  "version": "1.0.0"
}
```

### 修改显示格式
编辑 `utils/version.ts` 中的 `getVersionText` 函数。

### 修改样式
编辑 `components/VersionInfo.tsx` 中的样式类。

## 注意事项

1. 确保项目是Git仓库，否则无法获取提交信息
2. `.env.local` 文件会被自动生成，已添加到 `.gitignore`
3. 版本信息在开发环境和生产环境都会显示
4. 点击版本号可以查看详细信息

## 故障排除

### 无法获取Git信息
- 确保项目是Git仓库
- 确保有Git提交历史
- 检查Git命令是否可用

### 版本信息不显示
- 检查构建脚本是否正常运行
- 检查环境变量是否正确设置
- 检查组件是否正确导入

### Netlify构建失败
- 检查构建命令是否正确
- 检查Node.js版本是否兼容
- 查看Netlify构建日志 